commit be628eb34d9397129e4fa54cf7e71ead1b6ce8a1
Author: Eric Anholt <eric@anholt.net>
Date:   Wed Apr 12 17:52:56 2017 -0700

    panel-raspberrypi-touchscreen: Fix NULL deref if probe order goes wrong.
    
    If the i2c driver hadn't pobed before the panel driver probes, then
    the client would be NULL but we were looking for an ERR_PTR in the
    error case.
    
    Signed-off-by: Eric Anholt <eric@anholt.net>

diff --git a/drivers/gpu/drm/panel/panel-raspberrypi-touchscreen.c b/drivers/gpu/drm/panel/panel-raspberrypi-touchscreen.c
index 1a536fe4d040..5d6bfd81b07a 100644
--- a/drivers/gpu/drm/panel/panel-raspberrypi-touchscreen.c
+++ b/drivers/gpu/drm/panel/panel-raspberrypi-touchscreen.c
@@ -399,6 +399,9 @@ static struct i2c_client *rpi_touchscreen_get_i2c(struct device *dev,
 
 	of_node_put(node);
 
+	if (!client)
+		return ERR_PTR(-EPROBE_DEFER);
+
 	return client;
 }
 
diff -uN a/1.txt b/1.txt
--- a/dummy/rpi_1342_be628eb34d9397129e4fa54cf7e71ead1b6ce8a1.txt	1970-01-01 00:00:00.000000000 +0000
+++ b/dummy/rpi_1342_be628eb34d9397129e4fa54cf7e71ead1b6ce8a1.txt	2013-12-23 04:07:40.000000000 +0000
@@ -0,0 +1 @@
+dummy file to ensure patch has content.
