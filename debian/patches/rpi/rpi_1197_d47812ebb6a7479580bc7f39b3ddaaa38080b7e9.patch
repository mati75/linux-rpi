commit d47812ebb6a7479580bc7f39b3ddaaa38080b7e9
Author: Matthias Reichl <hias@horus.com>
Date:   Thu Feb 22 13:09:30 2018 +0100

    ASoC: hifiberry_dacplus: transmit S24_LE with 64 BCLK cycles
    
    Signed-off-by: Matthias Reichl <hias@horus.com>

diff --git a/sound/soc/bcm/hifiberry_dacplus.c b/sound/soc/bcm/hifiberry_dacplus.c
index b32dae9d3b1d..e36c4ba1e9a6 100644
--- a/sound/soc/bcm/hifiberry_dacplus.c
+++ b/sound/soc/bcm/hifiberry_dacplus.c
@@ -221,16 +221,27 @@ static int snd_rpi_hifiberry_dacplus_hw_params(
 {
 	int ret = 0;
 	struct snd_soc_pcm_runtime *rtd = substream->private_data;
+	int channels = params_channels(params);
+	int width = 32;
 
 	if (snd_rpi_hifiberry_is_dacpro) {
 		struct snd_soc_codec *codec = rtd->codec;
 
+		width = snd_pcm_format_physical_width(params_format(params));
+
 		snd_rpi_hifiberry_dacplus_set_sclk(codec,
 			params_rate(params));
 
 		ret = snd_rpi_hifiberry_dacplus_update_rate_den(
 			substream, params);
 	}
+
+	ret = snd_soc_dai_set_tdm_slot(rtd->cpu_dai, 0x03, 0x03,
+		channels, width);
+	if (ret)
+		return ret;
+	ret = snd_soc_dai_set_tdm_slot(rtd->codec_dai, 0x03, 0x03,
+		channels, width);
 	return ret;
 }
 
diff -uN a/1.txt b/1.txt
--- a/dummy/rpi_1197_d47812ebb6a7479580bc7f39b3ddaaa38080b7e9.txt	1970-01-01 00:00:00.000000000 +0000
+++ b/dummy/rpi_1197_d47812ebb6a7479580bc7f39b3ddaaa38080b7e9.txt	2013-12-23 04:07:40.000000000 +0000
@@ -0,0 +1 @@
+dummy file to ensure patch has content.
